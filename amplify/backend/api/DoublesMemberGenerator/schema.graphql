enum EventType {
  INITIALIZE
  JOIN
  LEAVE
  GENERATE
  RETRY
  FINISH
}

type Event @model @auth(rules: [{allow: public}]) {
  id: ID!
  environmentID: ID! @index(name: "byEnvironment")
  type: EventType!
  payload: AWSJSON!
  occurredAt: AWSDateTime!
}

type Environment @model @auth(rules: [{allow: public}]) {
  id: ID!
  data: AWSJSON!
  version: Int!
  ttl: AWSTimestamp!
  Events: [Event] @hasMany(indexName: "byEnvironment", fields: ["id"])
  finishedAt: AWSDateTime
}
